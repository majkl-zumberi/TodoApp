<div class="uk-section uk-section-muted uk-flex uk-flex-middle uk-animation-fade" uk-height-viewport>
	<div class="uk-width-1-1">
		<div class="uk-container">
			<div class="uk-grid-margin uk-grid uk-grid-stack" uk-grid>
				<div class="uk-width-1-1@m">
          <div class="uk-margin uk-width-large uk-margin-auto uk-card uk-card-default uk-card-body uk-box-shadow-large">
						<h3 class="uk-card-title uk-text-center">Benvenuto</h3>
						<form class="example-form" [formGroup]="registerForm" (ngSubmit)="registerUser()">
							<div class="uk-margin">
								<div class="uk-inline uk-width-1-1">
									<span class="uk-form-icon" uk-icon="icon: user"></span>
                  <input class="uk-input uk-form-large username-input" type="text" formControlName="username" placeholder="username"
                  [ngClass]="{'uk-form-danger':registerForm.get('username').errors &&
                      ((registerForm.get('username').touched ||
                       registerForm.get('username').dirty) &&
                       !registerForm.get('username').pristine)}"
                  >
								</div>
              </div>
              <div class="uk-alert-danger" uk-alert *ngIf="registerForm.get('username').errors?.userNameExists">
                <p>username già in uso</p>
            </div>
              <div formGroupName="pswGroup">
                  <div class="uk-margin">
                    <div class="uk-inline uk-width-1-1">
                      <span class="uk-form-icon" uk-icon="icon: lock"></span>
                      <input class="uk-input uk-form-large password-input" type="password" formControlName="password" placeholder="password">
                    </div>
                  </div>
                  <div class="uk-margin">
                    <div class="uk-inline uk-width-1-1">
                      <span class="uk-form-icon" uk-icon="icon: lock"></span>
                      <input [ngClass]="{'uk-form-danger':registerForm.get('pswGroup').errors ||
                      ((registerForm.get('pswGroup.passwordCnf').touched ||
                       registerForm.get('pswGroup.passwordCnf').dirty) &&
                       !registerForm.get('pswGroup.passwordCnf').valid)}" class="uk-input uk-form-large passwordCnf-input" type="password" placeholder="conferma password" formControlName="passwordCnf">

                    </div>
                  </div>
                  <div class="uk-alert-danger" uk-alert *ngIf="registerForm.get('pswGroup').errors?.match">
                    <a class="uk-alert-close" uk-close></a>
                    <p>le password non coincidono</p>
                </div>
              </div>

							<div class="uk-margin">
								<button class="uk-button uk-button-primary uk-button-large uk-width-1-1" type="submit"
                [disabled]="registerForm.status === 'INVALID' || registerForm.pending">Registrati<span *ngIf="registerForm.get('username').pending"> (searching)<div uk-spinner></div></span>
              </button>
							</div>
							<div class="uk-text-small uk-text-center">già registrato? <a type="button" routerLink="/auth/login">effettua il login</a>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
